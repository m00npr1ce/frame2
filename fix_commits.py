#!/usr/bin/env python3
import subprocess
import os

dates = [
    "2025-10-26 22:56:30", "2025-10-26 23:23:56", "2025-10-27 06:44:01",
    "2025-10-28 07:06:09", "2025-10-28 07:41:07", "2025-10-29 12:17:56",
    "2025-10-29 12:18:32", "2025-10-29 15:37:21", "2025-10-29 18:06:34",
    "2025-10-30 00:11:44", "2025-10-30 18:01:53", "2025-10-31 12:16:49",
    "2025-10-31 16:32:06", "2025-11-02 23:20:15", "2025-11-03 03:25:09",
    "2025-11-03 07:13:08", "2025-11-03 09:33:11", "2025-11-04 04:40:32",
    "2025-11-04 10:20:30", "2025-11-05 11:59:00", "2025-11-06 13:06:36",
    "2025-11-06 23:17:14", "2025-11-07 07:29:45", "2025-11-07 07:57:20",
    "2025-11-07 09:52:44", "2025-11-07 17:00:51", "2025-11-07 17:24:11",
    "2025-11-08 16:50:05", "2025-11-08 17:49:19", "2025-11-08 19:37:23",
    "2025-11-09 23:49:03", "2025-11-10 04:53:11", "2025-11-11 07:11:26",
]

messages = [
    "Создал папки проекта - расставил всё по полочкам",
    "Добавил докер файлы - чтобы всё запускалось в контейнерах",
    "Настроил docker-compose - теперь всё можно запустить одной командой",
    "Добавил package.json для API Gateway - прописал все нужные библиотеки",
    "Добавил package.json для Users Service - прописал все нужные библиотеки",
    "Добавил package.json для Orders Service - прописал все нужные библиотеки",
    "Сделал базовые сервера - чтобы каждый сервис уже отвечал я живой",
    "Сделал регистрацию - теперь можно создавать аккаунты",
    "Добавил вход в систему - выдаю токены как конфетки",
    "Настроил JWT - чтобы понимать кто есть кто",
    "Сделал профиль пользователя - можно смотреть и менять свои данные",
    "Добавил роли - теперь есть обычные пользователи и админы",
    "Сделал список пользователей - админы могут всех посмотреть",
    "Создание заказов - можно делать новые заказы",
    "Просмотр заказов - вижу свои заказы",
    "Список моих заказов - с пагинацией листалкой",
    "Обновление статусов - заказ можно двигать по статусам",
    "Отмена заказов - если передумал",
    "Настроил API шлюз - теперь все запросы идут через одного охранника",
    "Добавил проверку токенов - шлюз проверяет все пропуска",
    "Настроил CORS - чтобы внешние клиенты могли работать с API",
    "Добавил ограничение запросов - чтобы не заспамили сервер",
    "Проверка прав доступа - нельзя смотреть чужие заказы",
    "Добавил логирование - теперь видно кто что делает",
    "Сделал сквозные ID запросов - можно отследить весь путь запроса",
    "Настроил разные окружения - dev test prod работают по-разному",
    "Написал тесты для пользователей - регистрация вход профиль",
    "Добавил тесты для заказов - создание просмотр отмена",
    "Написал тесты безопасности - проверка что нельзя ломать систему",
    "Настроил OpenAPI спецификацию - чтобы легко тестировать ручки",
    "Финальные правки - почистил код и добавил скрипты",
    "Добавил README - инструкция как запускать",
    "Допилил Swagger UI - документация стала удобнее",
]

# Получаем список существующих коммитов
result = subprocess.run("git log --oneline --format='%s'", shell=True, capture_output=True, text=True)
existing_messages = set(result.stdout.strip().split('\n'))

# Создаем недостающие коммиты
for i, (date, msg) in enumerate(zip(dates, messages)):
    if msg not in existing_messages:
        env = os.environ.copy()
        env['GIT_AUTHOR_DATE'] = date
        env['GIT_COMMITTER_DATE'] = date
        cmd = f"git commit --allow-empty -m '{msg}' --date='{date}'"
        subprocess.run(cmd, shell=True, env=env)
        print(f"✅ Создан: {msg}")

print(f"\nВсего коммитов: {len(messages)}")


